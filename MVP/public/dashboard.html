<!DOCTYPE html><html lang="pt-BR"><head>  <meta charset="UTF-8">  <meta name="viewport" content="width=device-width, initial-scale=1.0">  <title>E-Fish ML | Dashboard</title>  <style>    :root {      --bg: #f3f6fb;      --panel: #ffffff;      --panel-2: #f8fafc;      --border: #e5e7eb;      --text: #0f172a;      --muted: #0f172a;      --accent: #2563eb;      --accent-2: #7c9cff;      --accent-rgb: 37, 99, 235;      --accent2-rgb: 124, 156, 255;      --topbar-bg: rgba(255, 255, 255, 0.86);      --topbar-text: #0f172a;      --status-bg: rgba(37, 99, 235, 0.08);    }    body.brand-efish {      --bg: #f3f6fb;      --panel: #ffffff;      --panel-2: #f8fafc;      --border: #e5e7eb;      --text: #0f172a;      --muted: #0f172a;      --accent: #2563eb;      --accent-2: #7c9cff;      --accent-rgb: 37, 99, 235;      --accent2-rgb: 124, 156, 255;      --topbar-bg: rgba(255, 255, 255, 0.86);      --topbar-text: #0f172a;      --status-bg: rgba(37, 99, 235, 0.08);    }    body.brand-duo {      --bg: #ffffff;      --panel: #ffffff;      --panel-2: #ffffff;      --border: #111111;      --text: #1f2937;      --muted: #1f2937;      --accent: #e50914;      --accent-2: #ffb3b9;      --accent-rgb: 229, 9, 20;      --accent2-rgb: 255, 179, 185;      --topbar-bg: rgba(255, 255, 255, 0.9);      --topbar-text: #1f2937;      --status-bg: rgba(229, 9, 20, 0.1);    }    * { box-sizing: border-box; }    body {      margin: 0;      min-height: 100vh;      font-family: "Inter", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;      color: var(--text);      background:        radial-gradient(circle at 10% 10%, rgba(var(--accent-rgb), 0.1), transparent 40%),        radial-gradient(circle at 85% 0%, rgba(var(--accent2-rgb), 0.2), transparent 38%),        linear-gradient(180deg, var(--bg) 0%, var(--panel-2) 100%);      display: flex;    }    .layout {      display: flex;      width: 100%;      min-height: 100vh;    }    .sidebar {      width: 260px;      background: var(--panel);      border-right: 1px solid var(--border);      padding: 20px;      display: flex;      flex-direction: column;      gap: 24px;      box-shadow: 10px 0 30px rgba(15, 23, 42, 0.08);    }    body.brand-gate .sidebar {      display: none;    }    body.brand-gate #switch-brand {      display: none;    }    .brand {      display: flex;      align-items: center;      gap: 12px;      padding-bottom: 14px;      border-bottom: 1px solid var(--border);    }    .brand img {      width: 52px;      height: 52px;      object-fit: contain;      filter: drop-shadow(0 6px 12px rgba(15, 23, 42, 0.12));    }    .brand-title {      display: block;      font-weight: 700;      font-size: 18px;      letter-spacing: -0.01em;      color: var(--topbar-text, var(--text));    }    .brand-sub {      display: block;      color: var(--topbar-text, var(--muted));      font-size: 12px;    }    .menu {      display: flex;      flex-direction: column;      gap: 8px;      padding-top: 8px;    }    .menu-item {      display: block;      padding: 12px 14px;      border-radius: 10px;      color: var(--text);      text-decoration: none;      border: 1px solid transparent;      background: transparent;      font-weight: 600;      transition: all 0.18s ease;    }    .menu-item:hover {      border-color: var(--border);      background: rgba(var(--accent-rgb), 0.08);    }    .menu-item.active {      border-color: rgba(var(--accent-rgb), 0.35);      background: linear-gradient(135deg, rgba(var(--accent-rgb), 0.18), rgba(var(--accent2-rgb), 0.18));      box-shadow: 0 12px 26px rgba(var(--accent-rgb), 0.22);      color: var(--text);    }    .content {      flex: 1;      display: flex;      flex-direction: column;      background: var(--panel-2);    }    .topbar {      display: flex;      align-items: center;      justify-content: space-between;      padding: 18px 24px;      border-bottom: 1px solid var(--border);      background: var(--topbar-bg);      backdrop-filter: blur(6px);      color: var(--topbar-text, var(--text));      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.06);    }    .topbar-actions {      position: relative;      display: flex;      align-items: center;      gap: 10px;      flex-wrap: wrap;      margin-left: auto;    }    #open-settings {      margin-left: auto;      background: #e50914;      border-color: #e50914;      color: #ffffff;      box-shadow: none;    }    #open-settings:hover {      background: #c40810;      border-color: #c40810;      color: #ffffff;    }    #open-settings svg {      display: block;      width: 16px;      height: 16px;      fill: currentColor;    }    .settings-popover {      position: absolute;      top: calc(100% + 10px);      right: 0;      min-width: 240px;      padding: 12px;      border-radius: 12px;      background: var(--panel);      border: 1px solid rgba(var(--accent-rgb), 0.2);      box-shadow: 0 16px 32px rgba(15, 23, 42, 0.12);      display: none;      z-index: 20;    }    .settings-popover.open {      display: grid;      gap: 10px;    }    .settings-title {      font-weight: 700;      margin: 0;    }    .settings-note {      margin: 0;      font-size: 12px;      color: var(--muted);    }    body:not(.brand-gate) #topbar-intro {      display: none;    }    .topbar h1 {      margin: 0;      font-size: 20px;      letter-spacing: -0.01em;      color: inherit;    }    .topbar p {      margin: 4px 0 0 0;      color: inherit;      font-size: 13px;    }    .status-pill {      display: inline-flex;      align-items: center;      gap: 10px;      padding: 10px 14px;      border-radius: 999px;      border: 1px solid rgba(var(--accent-rgb), 0.18);      background: var(--status-bg);      font-size: 13px;      color: var(--topbar-text, var(--text));      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.08);    }    body.brand-duo .topbar {      background: var(--topbar-bg);      border-color: var(--border);      color: var(--topbar-text, var(--text));    }    body.brand-duo .status-pill {      border-color: var(--border);    }    .status-pill.online {      border-color: rgba(34, 197, 94, 0.4);      background: rgba(34, 197, 94, 0.14);    }    .status-pill.online .dot {      background: #22c55e;      box-shadow: 0 0 0 6px rgba(34, 197, 94, 0.2);    }    body.brand-duo .sidebar {      background: #ffffff;      border-color: var(--border);      box-shadow: 6px 0 24px rgba(15, 23, 42, 0.08);    }    body.brand-duo .menu-item {      color: var(--text);    }    body.brand-duo .menu-item:hover {      background: rgba(var(--accent-rgb), 0.06);      border-color: var(--border);    }    body.brand-duo .menu-item.active {      border-color: rgba(var(--accent-rgb), 0.35);      background: linear-gradient(135deg, rgba(var(--accent-rgb), 0.14), rgba(var(--accent2-rgb), 0.12));      box-shadow: 0 8px 20px rgba(var(--accent-rgb), 0.15);    }    body.brand-duo .brand-sub,    body.brand-duo .brand-title {      color: var(--topbar-text, var(--text));    }    body.brand-duo .brand {      padding-bottom: 0;      border-bottom: none;      justify-content: center;    }    body.brand-duo .brand img {      width: 120px;      height: auto;      padding: 0;      background: transparent;      border: none;      filter: drop-shadow(0 10px 24px rgba(15, 23, 42, 0.15));    }    body.brand-duo .brand-text {      display: none;    }    .dot {      width: 10px;      height: 10px;      border-radius: 50%;      background: var(--accent);      box-shadow: 0 0 0 6px rgba(var(--accent-rgb), 0.18);      animation: pulse 1.8s ease-in-out infinite;    }    .dot.offline {      background: #ef4444;      box-shadow: 0 0 0 6px rgba(239, 68, 68, 0.18);    }    @keyframes pulse {      0% { transform: scale(0.95); opacity: 0.9; }      50% { transform: scale(1.05); opacity: 1; }      100% { transform: scale(0.95); opacity: 0.9; }    }    .board {      flex: 1;      padding: 24px;      display: flex;      align-items: flex-start;      justify-content: center;      overflow-y: auto;    }    .placeholder {      width: 100%;      min-height: 240px;      border: 2px dashed #111111;      border-radius: 14px;      display: grid;      place-items: center;      color: var(--muted);      text-align: center;      padding: 28px;      background: rgba(255, 255, 255, 0.82);    }    .board-card {      max-width: 1120px;      width: 100%;      margin: 0 auto;      text-align: left;      display: flex;      flex-direction: column;      gap: 16px;      background: rgba(255, 255, 255, 0.9);      border: 1px solid rgba(var(--accent-rgb), 0.15);      border-radius: 18px;      padding: 18px;      box-shadow: 0 14px 34px rgba(15, 23, 42, 0.1);    }    .cta {      display: inline-flex;      align-items: center;      gap: 10px;      padding: 12px 16px;      border-radius: 10px;      border: 1px solid rgba(var(--accent-rgb), 1);      background: rgba(var(--accent-rgb), 1);      color: #ffffff;      text-decoration: none;      font-weight: 600;      transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;      width: fit-content;    }    .cta:hover {      transform: translateY(-1px);      box-shadow: 0 10px 25px rgba(var(--accent-rgb), 0.18);      background: rgba(var(--accent-rgb), 0.9);    }    .note {      color: var(--muted);      font-size: 13px;      line-height: 1.5;    }    .app-header {      display: flex;      align-items: flex-start;      justify-content: space-between;      gap: 16px;      flex-wrap: wrap;    }    .eyebrow {      text-transform: uppercase;      letter-spacing: 0.08em;      font-size: 12px;      color: var(--muted);      margin: 0 0 6px 0;    }    .pill {      display: inline-flex;      align-items: center;      gap: 8px;      padding: 10px 14px;      border-radius: 999px;      border: 1px solid rgba(var(--accent-rgb), 0.28);      background: rgba(var(--accent-rgb), 0.12);      color: var(--text);      font-size: 13px;      box-shadow: 0 8px 24px rgba(var(--accent-rgb), 0.12);    }    .calc-grid {      display: grid;      grid-template-columns: 1.05fr 0.95fr;      gap: 16px;    }    .calc-extra {      margin-top: 0;    }    .panel-card {      background: var(--panel);      border: 1px solid var(--border);      border-radius: 14px;      padding: 16px;      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.08);      display: flex;      flex-direction: column;      gap: 12px;    }    .panel-title {      display: flex;      align-items: flex-start;      justify-content: space-between;      gap: 12px;      flex-wrap: wrap;      row-gap: 8px;      margin-bottom: 0;    }    .panel-title .actions {      gap: 8px;      row-gap: 8px;    }    .chip {      display: inline-flex;      align-items: center;      gap: 6px;      padding: 8px 12px;      border-radius: 10px;      background: rgba(var(--accent-rgb), 0.16);      border: 1px solid rgba(var(--accent-rgb), 0.35);      color: var(--text);      font-size: 12px;      text-transform: uppercase;      letter-spacing: 0.05em;    }    .field-grid {      display: grid;      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));      gap: 12px;    }    .field {      display: flex;      flex-direction: column;      gap: 6px;      padding: 10px 12px;      border-radius: 10px;      border: 1px solid var(--border);      background: var(--panel-2);    }    .field span {      font-size: 13px;      color: var(--muted);    }    .field input {      width: 100%;      padding: 10px 12px;      border-radius: 8px;      border: 1px solid rgba(15, 23, 42, 0.08);      background: var(--panel);      color: var(--text);      font-size: 15px;      outline: none;      transition: border 0.16s ease, box-shadow 0.16s ease, background 0.16s ease;    }    .field input:focus {      border-color: rgba(var(--accent-rgb), 0.5);      box-shadow: 0 0 0 3px rgba(var(--accent-rgb), 0.18);      background: #f8fafc;    }    .hint {      margin: 0;      font-size: 12px;      color: var(--muted);    }    .stats {      display: grid;      grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));      gap: 12px;      margin-bottom: 0;    }    .stat-card {      border: 1px solid var(--border);      border-radius: 12px;      padding: 12px;      background: var(--panel);      display: flex;      flex-direction: column;      gap: 6px;      min-height: 120px;      box-shadow: 0 6px 18px rgba(15, 23, 42, 0.06);    }    .stat-label {      color: var(--muted);      font-size: 13px;      margin: 0;    }    .stat-value {      margin: 0;      font-size: 20px;      font-weight: 700;      letter-spacing: -0.01em;    }    .value-positive { color: #4ade80; }    .value-negative { color: #f87171; }    .breakdown {      display: flex;      flex-direction: column;      gap: 8px;    }    .row {      display: flex;      align-items: center;      justify-content: space-between;      gap: 12px;      border-bottom: 1px dashed #111111;      padding-bottom: 8px;    }    .row:last-child {      border-bottom: none;      padding-bottom: 0;    }    .meta {      font-size: 13px;      color: var(--muted);      margin: 0;    }    .actions {      display: flex;      align-items: center;      gap: 10px;      flex-wrap: wrap;    }    .primary-btn, .ghost-btn {      border: 1px solid rgba(var(--accent-rgb), 0.4);      background: rgba(var(--accent-rgb), 0.12);      color: var(--text);      padding: 10px 14px;      border-radius: 10px;      font-weight: 600;      cursor: pointer;      transition: transform 0.16s ease, box-shadow 0.16s ease, background 0.16s ease;    }    .primary-btn {      background: rgba(var(--accent-rgb), 1);      border-color: rgba(var(--accent-rgb), 1);      color: #ffffff;      box-shadow: 0 10px 24px rgba(var(--accent-rgb), 0.25);    }    .primary-btn:hover {      transform: translateY(-1px);      box-shadow: 0 12px 28px rgba(var(--accent-rgb), 0.28);      background: rgba(var(--accent-rgb), 0.9);    }    .ghost-btn {      background: rgba(var(--accent-rgb), 1);      border: 1px solid rgba(var(--accent-rgb), 1);      color: #ffffff;      font-weight: 600;    }    .ghost-btn:hover {      border-color: rgba(var(--accent-rgb), 0.5);      color: #ffffff;    }    .primary-btn[disabled],    .ghost-btn[disabled] {      opacity: 0.6;      cursor: not-allowed;      box-shadow: none;    }    .select {      width: 100%;      padding: 10px 12px;      border-radius: 8px;      border: 1px solid rgba(15, 23, 42, 0.08);      background: #ffffff;      color: var(--text);      font-size: 15px;      outline: none;      transition: border 0.16s ease, box-shadow 0.16s ease, background 0.16s ease;    }    .select:focus {      border-color: rgba(var(--accent-rgb), 0.5);      box-shadow: 0 0 0 3px rgba(var(--accent-rgb), 0.18);      background: #f8fafc;    }    .btn-small {      padding: 8px 10px;      font-size: 13px;    }    .sku-output {      border: 1px dashed #111111;      border-radius: 12px;      padding: 14px;      background: var(--panel-2);      display: flex;      flex-direction: column;      gap: 6px;    }    .sku-text {      font-size: 20px;      font-weight: 700;      letter-spacing: 0.08em;      text-transform: uppercase;    }    .list {      display: flex;      flex-direction: column;      gap: 10px;      margin-top: 0;      max-height: 320px;      overflow-y: auto;    }    .list.full {      max-height: none;      overflow: visible;    }    .sku-line {      display: flex;      align-items: center;      justify-content: space-between;      gap: 10px;      border: 1px solid var(--border);      border-radius: 10px;      padding: 10px 12px;      background: var(--panel);      font-size: 14px;      letter-spacing: 0.04em;      text-transform: uppercase;      box-shadow: 0 6px 14px rgba(15, 23, 42, 0.06);    }    .checkbox-row {      display: flex;      align-items: center;      gap: 8px;      font-size: 13px;      color: var(--text);    }    .checkbox-row input {      accent-color: var(--accent);      width: 16px;      height: 16px;    }    .subnote {      font-size: 12px;      color: var(--muted);    }    .brand-grid {      display: grid;      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));      gap: 16px;    }    .brand-card {      border: 1px solid var(--border);      border-radius: 14px;      padding: 14px;      background: linear-gradient(180deg, rgba(255, 255, 255, 0.92), rgba(254, 242, 242, 0.92));      display: flex;      align-items: center;      gap: 14px;      cursor: pointer;      transition: transform 0.18s ease, box-shadow 0.18s ease, border 0.18s ease;      color: var(--text);      text-align: left;    }    .brand-card:hover {      transform: translateY(-2px);      border-color: rgba(var(--accent-rgb), 0.35);      box-shadow: 0 12px 28px rgba(var(--accent-rgb), 0.18);    }    .brand-card img {      width: 64px;      height: 64px;      object-fit: contain;      background: #ffffff;      border-radius: 12px;      padding: 10px;      border: 1px solid var(--border);    }    .brand-card[data-brand="duo"] img {      background: #ffffff;      border-color: var(--border);    }    .brand-card h3 {      margin: 0;      font-size: 17px;    }    .brand-card p {      margin: 4px 0 0 0;      color: var(--muted);      font-size: 13px;    }    @media (max-width: 1024px) {      .calc-grid { grid-template-columns: 1fr; }    }    @media (max-width: 820px) {      .layout { flex-direction: column; }      .sidebar { width: 100%; flex-direction: row; align-items: center; }      .menu { flex-direction: row; flex-wrap: wrap; }      .content { min-height: 60vh; }      .topbar { align-items: flex-start; gap: 12px; flex-direction: column; }    }      .primary-btn,
    .ghost-btn,
    .cta,
    .status-pill,
    #switch-brand,
    #open-settings {
      border-radius: 999px;
    }
    .primary-btn,
    #open-settings {
      background: #e50914;
      border-color: #e50914;
      color: #ffffff;
      box-shadow: none;
    }
    .primary-btn:hover,
    #open-settings:hover {
      background: #c40810;
      border-color: #c40810;
      color: #ffffff;
    }
    .ghost-btn,
    #switch-brand {
      background: #ffffff;
      border-color: #d7dde7;
      color: #111827;
      box-shadow: none;
    }
    .ghost-btn:hover,
    #switch-brand:hover {
      border-color: #111827;
      color: #111827;
    }
    .ghost-btn[disabled] {
      background: #f3f4f6;
      border-color: #e5e7eb;
      color: #9ca3af;
    }
    @media (max-width: 980px) {
      .sidebar {
        width: 100%;
        padding: 14px 16px;
        gap: 16px;
      }
      .brand {
        justify-content: center;
        padding-bottom: 8px;
      }
      .menu {
        flex-direction: row;
        flex-wrap: nowrap;
        overflow-x: auto;
        padding-bottom: 6px;
      }
      .menu-item {
        white-space: nowrap;
      }
      .content {
        min-height: auto;
      }
      .topbar {
        padding: 14px 16px;
      }
      .board {
        padding: 16px;
      }
    }
    @media (max-width: 640px) {
      body {
        background: #ffffff;
      }
      .layout {
        flex-direction: column;
      }
      .sidebar {
        border-right: none;
        border-bottom: 1px solid var(--border);
        box-shadow: none;
      }
      .topbar {
        gap: 12px;
        align-items: flex-start;
      }
      .topbar-actions {
        width: 100%;
        justify-content: flex-end;
        gap: 8px;
      }
      .status-pill {
        width: 100%;
        justify-content: center;
      }
      .board {
        padding: 12px;
      }
      .board-card {
        padding: 14px;
      }
      .calc-grid {
        grid-template-columns: 1fr;
      }
      .field-grid {
        grid-template-columns: 1fr;
      }
      .actions {
        width: 100%;
      }
      .primary-btn,
      .ghost-btn,
      .cta {
        width: 100%;
        justify-content: center;
      }
      .list {
        max-height: none;
        overflow: visible;
      }
    }    .hamburger-btn {
      display: none;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: 1px solid #d7dde7;
      background: #ffffff;
      color: #111827;
    }
    .hamburger-btn span,
    .hamburger-btn span::before,
    .hamburger-btn span::after {
      display: block;
      width: 18px;
      height: 2px;
      background: currentColor;
      border-radius: 2px;
      content: "";
      position: relative;
    }
    .hamburger-btn span::before {
      position: absolute;
      top: -6px;
      left: 0;
    }
    .hamburger-btn span::after {
      position: absolute;
      top: 6px;
      left: 0;
    }
    .mobile-overlay {
      display: none;
    }
    @media (max-width: 640px) {
      .hamburger-btn {
        display: inline-flex;
      }
      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        width: 280px;
        max-width: 80vw;
        transform: translateX(-100%);
        transition: transform 0.2s ease;
        z-index: 40;
        border-right: 1px solid var(--border);
      }
      .sidebar.is-open {
        transform: translateX(0);
      }
      .mobile-overlay.open {
        display: block;
        position: fixed;
        inset: 0;
        background: rgba(15, 23, 42, 0.45);
        z-index: 30;
      }
      .menu {
        flex-direction: column;
        overflow: visible;
      }
      .topbar {
        position: sticky;
        top: 0;
        z-index: 20;
      }
    }    .topbar {
      position: relative;
      align-items: center;
    }
    .topbar-logo {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
    }
    .topbar-logo img {
      height: 32px;
      width: auto;
      object-fit: contain;
    }
    .hamburger-btn {
      border-radius: 999px;
    }
    .primary-btn,
    .cta,
    #open-settings {
      background: #e50914;
      border-color: #e50914;
      color: #ffffff;
      box-shadow: none;
      border-radius: 999px;
    }
    .primary-btn:hover,
    .cta:hover,
    #open-settings:hover {
      background: #c40810;
      border-color: #c40810;
      color: #ffffff;
    }
    .ghost-btn,
    #switch-brand {
      background: #ffffff;
      border-color: #d7dde7;
      color: #111827;
      border-radius: 999px;
    }
    .ghost-btn:hover,
    #switch-brand:hover {
      border-color: #111827;
      color: #111827;
    }
    @media (max-width: 640px) {
      #topbar-intro {
        display: none;
      }
      .topbar {
        padding: 12px 14px;
        gap: 10px;
      }
      .topbar-logo img {
        height: 28px;
      }
      .topbar-actions {
        width: 100%;
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
      }
      .status-pill,
      #open-settings,
      .ghost-btn,
      .primary-btn,
      .cta {
        width: 100%;
        justify-content: center;
      }
      .settings-popover {
        right: 0;
        left: 0;
      }
    }    .topbar-actions {
      gap: 12px;
    }
    .menu {
      gap: 12px;
    }
    .menu-item {
      padding: 12px 18px;
      border-radius: 999px;
      font-size: 15px;
      font-weight: 600;
      border: 1px solid #e5e7eb;
      background: #ffffff;
      color: #111827;
      box-shadow: 0 1px 0 rgba(15, 23, 42, 0.04);
    }
    .menu-item.active {
      background: #ffffff;
      border-color: #cbd5f5;
      box-shadow: 0 8px 22px rgba(15, 23, 42, 0.08);
      color: #111827;
    }
    .menu-item:hover {
      border-color: #111827;
      background: #ffffff;
    }
    .primary-btn,
    .cta,
    #open-settings {
      height: 42px;
      padding: 0 18px;
      font-size: 14px;
      letter-spacing: 0.01em;
    }
    .ghost-btn,
    #switch-brand {
      height: 42px;
      padding: 0 18px;
      font-size: 14px;
    }
    .status-pill {
      height: 42px;
      padding: 0 18px;
      font-size: 13px;
      border-radius: 999px;
    }
    .board {
      padding: 28px 32px;
    }
    .board-card {
      padding: 22px;
    }
    .app-header h2 {
      font-size: 22px;
    }
    .note {
      font-size: 14px;
      line-height: 1.6;
    }
    @media (max-width: 640px) {
      .menu {
        gap: 10px;
      }
      .menu-item {
        font-size: 14px;
        padding: 10px 16px;
      }
      .topbar-actions {
        gap: 10px;
      }
      .board {
        padding: 16px;
      }
      .board-card {
        padding: 18px;
      }
      .app-header h2 {
        font-size: 20px;
      }
    }    @media (max-width: 640px) {
      .topbar {
        padding: 10px 12px;
      }
      .topbar-logo {
        position: static;
        transform: none;
        margin: 0 auto;
      }
      .topbar-actions {
        flex-direction: row;
        flex-wrap: nowrap;
        justify-content: space-between;
        align-items: center;
        width: 100%;
      }
      #open-settings,
      #switch-brand {
        width: auto;
        height: 38px;
        padding: 0 14px;
        font-size: 13px;
      }
      .status-pill {
        width: auto;
        height: 36px;
        padding: 0 12px;
        font-size: 12px;
        border-radius: 999px;
      }
      .hamburger-btn {
        width: 38px;
        height: 38px;
      }
      .settings-popover {
        left: 12px;
        right: 12px;
      }
      .board {
        padding: 14px;
      }
      .board-card {
        padding: 16px;
      }
      .menu {
        gap: 10px;
      }
      .menu-item {
        width: 100%;
        border-radius: 14px;
        padding: 12px 16px;
        text-align: left;
      }
      .primary-btn,
      .ghost-btn,
      .cta {
        width: 100%;
      }
    }    @media (max-width: 640px) {
      .sidebar .brand {
        display: none;
      }
    }    .sidebar-close {
      display: none;
      align-items: center;
      justify-content: center;
      height: 40px;
      border-radius: 999px;
      border: 1px solid #d7dde7;
      background: #ffffff;
      color: #111827;
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 8px;
    }
    #open-settings {
      background: #ffffff;
      border-color: #d7dde7;
      color: #111827;
      box-shadow: none;
    }
    #open-settings:hover {
      border-color: #111827;
      color: #111827;
      background: #ffffff;
    }
    @media (max-width: 640px) {
      .sidebar-close {
        display: inline-flex;
      }
    }    #open-settings {
      width: 40px;
      height: 40px;
      padding: 0;
      border-radius: 999px;
      background: #ffffff !important;
      border: 1px solid #e5e7eb !important;
      color: #111827 !important;
      box-shadow: 0 1px 0 rgba(15, 23, 42, 0.04) !important;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    #open-settings:hover {
      border-color: #111827 !important;
      background: #ffffff !important;
      color: #111827 !important;
    }
    #open-settings svg {
      width: 16px;
      height: 16px;
    }    #open-settings {
      width: 38px !important;
      height: 38px !important;
      padding: 0 !important;
      border-radius: 999px !important;
      border: 1px solid #d7dde7 !important;
      background: #ffffff !important;
      color: #111827 !important;
      box-shadow: none !important;
    }
    #open-settings svg {
      width: 14px !important;
      height: 14px !important;
      fill: currentColor !important;
    }</style></head><body>  <div class="layout">    <aside class="sidebar">      <div class="brand">        <img id="brand-logo" src="Logo.png" alt="Logo">        <div class="brand-text">          <span class="brand-title" id="brand-title">Selecione a empresa</span>          <span class="brand-sub" id="brand-sub">Escolha um workspace</span>        </div>      </div>      <button class="sidebar-close" id="mobile-menu-close">Voltar</button><nav class="menu" id="menu"></nav>    </aside>    <section class="content">      <header class="topbar"><div class="topbar-logo"><img id="topbar-logo" src="Logo.png" alt="Logo"></div><button class="hamburger-btn" id="mobile-menu-toggle" aria-label="Abrir menu"><span></span></button>        <div id="topbar-intro">          <h1 id="topbar-title">DASHBOARD</h1>          <p id="topbar-subtitle">Escolha um app no menu e veja os detalhes aqui.</p>        </div>        <div class="topbar-actions">                    <button class="ghost-btn btn-small" id="open-settings" aria-label="Configuracoes">            <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">              <path d="M12 8.6a3.4 3.4 0 1 0 0 6.8 3.4 3.4 0 0 0 0-6.8Zm10 3.4c0-.5-.04-1-.1-1.5l2.02-1.56a1 1 0 0 0 .24-1.3l-1.92-3.32a1 1 0 0 0-1.24-.44l-2.38.96a8.9 8.9 0 0 0-2.6-1.5l-.36-2.52a1 1 0 0 0-.99-.84h-3.84a1 1 0 0 0-.99.84l-.36 2.52a8.9 8.9 0 0 0-2.6 1.5l-2.38-.96a1 1 0 0 0-1.24.44L.84 7.64a1 1 0 0 0 .24 1.3l2.02 1.56c-.06.5-.1 1-.1 1.5s.04 1 .1 1.5l-2.02 1.56a1 1 0 0 0-.24 1.3l1.92 3.32a1 1 0 0 0 1.24.44l2.38-.96a8.9 8.9 0 0 0 2.6 1.5l.36 2.52a1 1 0 0 0 .99.84h3.84a1 1 0 0 0 .99-.84l.36-2.52a8.9 8.9 0 0 0 2.6-1.5l2.38.96a1 1 0 0 0 1.24-.44l1.92-3.32a1 1 0 0 0-.24-1.3l-2.02-1.56c.06-.5.1-1 .1-1.5Z" />            </svg>          </button>                    <div class="settings-popover" id="settings-popover">            <h4 class="settings-title">Configuracoes</h4>            <p class="settings-note">Conecte servicos externos por aqui.</p>            <a class="cta btn-small" href="#" id="bling-connect">Conectar Bling</a>          </div>        </div>      </header>      <div class="board">        <div class="placeholder" id="board-content">          Informacoes do app aparecerao aqui.        </div>      </div>    </section>  </div>  <script>    const BASE_PATH = window.location.pathname.startsWith("/efish") ? "/efish" : "";    const withBase = (path) => `${BASE_PATH}${path}`;    const brandConfigs = {      efish: {        title: "E-Fish ML",        subtitle: "Workspace",        logo: "Logo.png",        apps: [          { id: "app1", label: "Calculadora ML", render: renderApp1 },          { id: "app2", label: "Gerador de SKU", render: renderApp2 },          { id: "app3", label: "Gerador de EAN-13", render: renderApp3 }        ]      },      duo: {        title: "Duo International",        subtitle: "Workspace",        logo: "duo-logo.png",        apps: [          { id: "duo-catalog", label: "Catalogo Duo", render: renderDuoCatalog },          { id: "duo-registrations", label: "Cadastros", render: renderDuoRegistrations },          { id: "duo-approvals", label: "Aprovar Orcamentos", render: renderOrderApprovals },          { id: "duo-bling-clients", label: "Bling Clientes", render: renderBlingClients },          { id: "duo-bling-products", label: "Bling Produtos", render: renderBlingProducts },          { id: "duo-bling-sellers", label: "Bling Vendedores", render: renderBlingSellers },          { id: "duo-bling-stock", label: "Bling Estoque", render: renderBlingStock },          { id: "duo-bling-orders", label: "Bling Pedidos", render: renderBlingOrders },          { id: "duo-admin", label: "Gestao de Produtos", render: renderDuoAdmin },          { id: "duo-ops", label: "Operacoes Duo", render: () => renderBrandPlaceholder("Operacoes Duo", "Adicione fluxos e relatorios da Duo International.") }        ]      }    };    let currentBrand = null;    function applyBrandTheme(brandId) {      document.body.classList.remove("brand-efish", "brand-duo");      if (brandId === "efish") {        document.body.classList.add("brand-efish");      } else if (brandId === "duo") {        document.body.classList.add("brand-duo");      }    }    function updateBrandHeader(brand) {      const logoEl = document.getElementById("brand-logo");      const titleEl = document.getElementById("brand-title");      const subEl = document.getElementById("brand-sub");      if (logoEl && brand.logo) logoEl.src = brand.logo;      if (logoEl) logoEl.alt = `Logo ${brand.title || "Empresa"}`;      if (titleEl && brand.title) titleEl.textContent = brand.title;      if (subEl && brand.subtitle) subEl.textContent = brand.subtitle;    }    function updateTopbar(title, subtitle) {      const titleEl = document.getElementById("topbar-title");      const subtitleEl = document.getElementById("topbar-subtitle");      if (titleEl && title) titleEl.textContent = title;      if (subtitleEl && subtitle) subtitleEl.textContent = subtitle;    }    function buildMenu(brandId) {      const menu = document.getElementById("menu");      if (!menu) return;      menu.innerHTML = "";      const brand = brandConfigs[brandId];      if (!brand) return;      brand.apps.forEach((app, index) => {        const link = document.createElement("a");        link.className = `menu-item${index === 0 ? " active" : ""}`;        link.href = "#";        link.textContent = app.label;        link.setAttribute("data-app", app.id);        link.addEventListener("click", (ev) => {          ev.preventDefault();          selectApp(app.id);        });        menu.appendChild(link);      });    }    function renderBrandGate() {      currentBrand = null;      localStorage.removeItem("brandSelection");      document.body.classList.add("brand-gate");      updateTopbar("DASHBOARD", "Escolha uma empresa para continuar.");      updateBrandHeader({ title: "Selecione a empresa", subtitle: "Escolha um workspace", logo: "Logo.png" });      buildMenu(null);      applyBrandTheme(null);      const items = document.querySelectorAll(".menu-item");      items.forEach((item) => item.classList.remove("active"));      const board = document.getElementById("board-content");      if (!board) return;      board.innerHTML = `        <div class="board-card">          <div class="app-header">            <div>              <p class="eyebrow">Bem-vindo</p>              <h2 style="margin: 0 0 6px 0;">Selecione a empresa</h2>              <p class="note">Escolha qual workspace abrir. Você pode trocar a qualquer momento.</p>            </div>          </div>          <div class="brand-grid">            <button class="brand-card" data-brand="efish">              <img src="Logo.png" alt="Logo E-Fish ML">              <div>                <h3>E-Fish ML</h3>                <p>Calculadora, SKU e EAN integrados.</p>              </div>            </button>            <button class="brand-card" data-brand="duo">              <img src="duo-logo.png" alt="Logo Duo">              <div>                <h3>Duo International</h3>                <p>Workspace separado para apps da Duo.</p>              </div>            </button>          </div>        </div>      `;      board.querySelectorAll("[data-brand]").forEach((btn) => {        btn.addEventListener("click", () => {          const brandId = btn.getAttribute("data-brand");          applyBrand(brandId);        });      });    }    function applyBrand(brandId) {      const brand = brandConfigs[brandId];      if (!brand) return;      currentBrand = brandId;      localStorage.setItem("brandSelection", brandId);      document.body.classList.remove("brand-gate");      updateTopbar("DASHBOARD", "Escolha um app no menu e veja os detalhes aqui.");      applyBrandTheme(brandId);      updateBrandHeader(brand);      buildMenu(brandId);      const firstApp = brand.apps[0];      if (firstApp) {        selectApp(firstApp.id);      } else {        renderBrandPlaceholder(brand.title, "Nenhum app cadastrado ainda.");      }    }    function selectApp(appId) {      const brand = brandConfigs[currentBrand];      if (!brand) {        renderBrandGate();        return;      }      const items = document.querySelectorAll(".menu-item");      items.forEach((item) => {        const isActive = item.getAttribute("data-app") === appId;        item.classList.toggle("active", isActive);      });      const app = brand.apps.find((entry) => entry.id === appId);      if (app && typeof app.render === "function") {        app.render();      } else {        renderBrandPlaceholder(appId, "Integrar conteúdo deste app.");      }    }    function renderApp1() {      const board = document.getElementById("board-content");      board.innerHTML = `        <div class="board-card">          <div class="app-header">            <div>              <h2 style="margin: 0 0 6px 0;">Calculadora Mercado Livre</h2>              <p class="note">Simule custo, frete, comissão e imposto para ver lucro final e preço sugerido por margem.</p>            </div>            <div class="pill">Atualiza em tempo real</div>          </div>          <div class="calc-grid">            <div class="panel-card">              <div class="panel-title">                <div>                  <h3 style="margin: 0;">Entradas</h3>                  <p class="note" style="margin: 4px 0 0 0;">Preencha custos e percentuais para o anúncio.</p>                </div>                <span class="chip">Mercado Livre</span>              </div>              <div class="field-grid">                <label class="field">                  <span>Nome do produto (opcional)</span>                  <input type="text" placeholder="ex.: exemplo" data-calc="productName" />                </label>                <label class="field">                  <span>Custo base (R$)</span>                  <input type="number" min="0" step="0.5" value="100" data-calc="baseCost" />                </label>                <label class="field">                  <span>Frete (R$)</span>                  <input type="number" min="0" step="0.5" value="20" data-calc="freight" />                </label>                <label class="field">                  <span>IPI (%)</span>                  <input type="number" min="0" step="0.1" value="0" data-calc="ipi" />                </label>                <label class="field">                  <span>Imposto (%)</span>                  <input type="number" min="0" step="0.1" value="10" data-calc="tax" />                </label>                <label class="field">                  <span>Comissão ML (%)</span>                  <input type="number" min="0" step="0.1" value="12" data-calc="commission" />                </label>                <label class="field">                  <span>Tipo de anúncio</span>                  <select class="select" data-calc="adType">                    <option value="classic" selected>Clássico (12%)</option>                    <option value="premium">Premium (16%)</option>                    <option value="custom">Personalizado</option>                  </select>                </label>                <label class="field">                  <span>Preço de venda (R$)</span>                  <input type="number" min="0" step="0.5" value="241" data-calc="price" />                </label>                <label class="field">                  <span>Margem alvo (%)</span>                  <input type="number" min="0" step="0.1" value="15" data-calc="targetMargin" />                </label>              </div>              <div class="field calc-extra" style="gap: 10px;">                <div class="checkbox-row">                  <input type="checkbox" data-calc="below79" />                  <span>Abaixo de R$79? Aplicar frete fixo de R$ 6,00.</span>                </div>              </div>              <p class="hint">Baseado na fórmula do ML: Lucro = Venda - Frete - Comissão - Imposto - Custo (c/ IPI). Preço sugerido resolve a margem alvo com os percentuais.</p>            </div>            <div class="panel-card">              <div class="panel-title">                <div>                  <h3 style="margin: 0;">Resumo da venda</h3>                  <p class="note" style="margin: 4px 0 0 0;">Lucro e margem final com detalhamento de comissão, imposto e custo.</p>                </div>              </div>              <div class="stats">                <div class="stat-card">                  <p class="stat-label">Preço de venda</p>                  <p class="stat-value" data-output="price">R$ 0,00</p>                  <p class="note">Valor final que você informou.</p>                </div>                <div class="stat-card">                  <p class="stat-label">Margem de lucro final</p>                  <p class="stat-value" data-output="margin">0%</p>                  <p class="note">Considera frete, comissão, imposto e custo (c/ IPI).</p>                </div>                <div class="stat-card">                  <p class="stat-label">Lucro final</p>                  <p class="stat-value" data-output="profit">R$ 0,00</p>                  <p class="note" data-output="margin-label">Margem atual: 0%</p>                </div>              </div>              <div class="breakdown">                <div class="row"><span>Custo base</span><span data-output="base-cost">—</span></div>                <div class="row"><span>Custo com IPI</span><span data-output="cost-ipi">—</span></div>                <div class="row"><span>Frete</span><span data-output="freight">—</span></div>                <div class="row"><span>Comissão</span><span data-output="commission">—</span></div>                <div class="row"><span>Imposto</span><span data-output="tax">—</span></div>                <div class="row"><span>Sobra (Venda - Frete - Comissão)</span><span data-output="left-no-tax">—</span></div>                <div class="row"><span>Sobra - Imposto</span><span data-output="left-tax">—</span></div>                <div class="row"><span>Lucro (Sobra - Custo c/ IPI)</span><span data-output="profit-line">—</span></div>              </div>              <p class="meta" data-output="suggestion">Preço sugerido para margem alvo: —</p>            </div>          </div>        </div>      `;      initApp1Calculator();    }    function initApp1Calculator() {      const board = document.getElementById("board-content");      if (!board) return;      const currency = new Intl.NumberFormat("pt-BR", {        style: "currency",        currency: "BRL",        minimumFractionDigits: 2      });      const toPercent = (value) => `${value.toFixed(2)}%`;      const readNumber = (name) => {        const input = board.querySelector(`[data-calc="${name}"]`);        if (!input) return 0;        const parsed = parseFloat(String(input.value).replace(",", "."));        return Number.isFinite(parsed) ? parsed : 0;      };      const setText = (name, value) => {        const el = board.querySelector(`[data-output="${name}"]`);        if (el) el.textContent = value;      };      const recalc = () => {        const price = Math.max(0, readNumber("price"));        const baseCost = Math.max(0, readNumber("baseCost"));        const freightInput = Math.max(0, readNumber("freight"));        const ipiPct = Math.max(0, readNumber("ipi"));        const taxPct = Math.max(0, readNumber("tax"));        const commissionPct = Math.max(0, readNumber("commission"));        const targetMarginPct = Math.max(0, readNumber("targetMargin"));        const below79 = Boolean(board.querySelector('[data-calc="below79"]')?.checked);        const freight = below79 ? 6 : freightInput;        const costWithIpi = baseCost * (1 + ipiPct / 100);        const commissionValue = price * (commissionPct / 100);        const taxValue = price * (taxPct / 100);        const leftNoTax = price - freight - commissionValue;        const leftWithTax = leftNoTax - taxValue;        const profit = leftWithTax - costWithIpi;        const margin = price > 0 ? (profit / price) * 100 : 0;        const profitEl = board.querySelector('[data-output="profit"]');        if (profitEl) {          profitEl.classList.toggle("value-positive", profit >= 0);          profitEl.classList.toggle("value-negative", profit < 0);        }        setText("price", currency.format(price));        setText("margin", toPercent(margin));        setText("margin-label", `Margem atual: ${toPercent(margin)}`);        setText("profit", currency.format(profit));        setText("base-cost", currency.format(baseCost));        setText("cost-ipi", currency.format(costWithIpi));        setText("freight", currency.format(freight));        setText("commission", `${toPercent(commissionPct)} (${currency.format(commissionValue)})`);        setText("tax", `${toPercent(taxPct)} (${currency.format(taxValue)})`);        setText("left-no-tax", currency.format(leftNoTax));        setText("left-tax", currency.format(leftWithTax));        setText("profit-line", currency.format(profit));        const target = targetMarginPct / 100;        const denominator = 1 - commissionPct / 100 - taxPct / 100 - target;        const suggestedPrice = denominator > 0 ? (freight + costWithIpi) / denominator : null;        const suggestionEl = board.querySelector('[data-output="suggestion"]');        if (suggestedPrice !== null && Number.isFinite(suggestedPrice)) {          if (suggestionEl) suggestionEl.textContent = `Preço sugerido para ${toPercent(targetMarginPct)} de margem: ${currency.format(suggestedPrice)}.`;        } else if (suggestionEl) {          suggestionEl.textContent = "Margem alvo inalcançável: ajuste comissão, imposto ou custos.";        }      };      const adTypeSelect = board.querySelector('[data-calc="adType"]');      const commissionInput = board.querySelector('[data-calc="commission"]');      if (adTypeSelect && commissionInput) {        adTypeSelect.addEventListener("change", () => {          if (adTypeSelect.value === "classic") commissionInput.value = 12;          else if (adTypeSelect.value === "premium") commissionInput.value = 16;        });      }      board.querySelectorAll("[data-calc]").forEach((input) => {        input.addEventListener("input", recalc);        input.addEventListener("change", recalc);      });      recalc();    }    function renderApp2() {      const board = document.getElementById("board-content");      board.innerHTML = `        <div class="board-card">          <div class="app-header">            <div>              <h2 style="margin: 0 0 6px 0;">Gerador de SKU</h2>              <p class="note">Monte SKUs padronizados com prefixo, categoria, produto, variação e sequencial. Inclua data e sufixo randômico para evitar duplicidade.</p>            </div>            <div class="pill">Formato consistente e copiável</div>          </div>          <div class="calc-grid">            <div class="panel-card">              <div class="panel-title">                <div>                  <h3 style="margin: 0;">Configuração</h3>                  <p class="note" style="margin: 4px 0 0 0;">Defina os blocos que compõem o SKU.</p>                </div>                <span class="chip">SKU</span>              </div>              <div class="field-grid">                <label class="field">                  <span>Prefixo</span>                  <input type="text" value="EFM" data-sku-input="prefix" />                </label>                <label class="field">                  <span>Categoria</span>                  <input type="text" value="PEIXE" data-sku-input="category" />                </label>                <label class="field">                  <span>Produto/base</span>                  <input type="text" value="TILAPIA" data-sku-input="product" />                </label>                <label class="field">                  <span>Variação</span>                  <input type="text" value="FRESCA" data-sku-input="variant" />                </label>                <label class="field">                  <span>Sequencial inicial</span>                  <input type="number" min="0" step="1" value="1001" data-sku-input="sequence" />                </label>                <label class="field">                  <span>Dígitos do sequencial</span>                  <input type="number" min="2" max="8" step="1" value="4" data-sku-input="digits" />                </label>              </div>              <div class="field-grid">                <label class="field">                  <span>Separador</span>                  <input type="text" value="-" maxlength="1" data-sku-input="separator" />                </label>                <label class="field">                  <span>Sufixo randômico (2 chars)</span>                  <input type="text" value="" placeholder="Deixe vazio para sortear" data-sku-input="suffix" />                </label>              </div>              <div class="field" style="gap: 10px;">                <div class="checkbox-row">                  <input type="checkbox" data-sku-input="useDate" checked />                  <span>Incluir data (YYMM)</span>                </div>                <div class="checkbox-row">                  <input type="checkbox" data-sku-input="autoIncrement" checked />                  <span>Incrementar sequencial automaticamente</span>                </div>                <div class="checkbox-row">                  <input type="checkbox" data-sku-input="randomSuffix" checked />                  <span>Gerar sufixo randômico (quando campo vazio)</span>                </div>              </div>              <p class="hint">Sugestão: use blocos curtos e estáveis (ex.: prefixo da marca, categoria e variante) e um sequencial com 4–6 dígitos.</p>            </div>            <div class="panel-card">              <div class="panel-title">                <div>                  <h3 style="margin: 0;">Saída</h3>                  <p class="note" style="margin: 4px 0 0 0;">Gere e copie SKUs prontos para colar em planilhas ou ERPs.</p>                </div>                <div class="actions">                  <button class="primary-btn" data-sku-action="generate">Gerar SKU</button>                  <button class="ghost-btn" data-sku-action="copy-last">Copiar último</button>                  <button class="ghost-btn" data-sku-action="copy-all">Copiar todos</button>                </div>              </div>              <div class="sku-output">                <span class="eyebrow" style="margin:0;">Último SKU</span>                <div class="sku-text" data-output="latest-sku">—</div>                <p class="note" data-output="latest-hint">Clique em "Gerar SKU" para começar.</p>              </div>              <div class="list" data-output="sku-list"></div>              <p class="meta">Formato padrão: PREFIXO-CATEGORIA-PRODUTO-VARIACAO-YYMM-SEQUENCIAL-SUFIXO (ex.: EFM-PEIXE-TILAPIA-FRESCA-2409-1001-R2).</p>            </div>          </div>        </div>      `;      initSkuGenerator();    }    function initSkuGenerator() {      const board = document.getElementById("board-content");      if (!board) return;      const inputs = (name) => board.querySelector(`[data-sku-input="${name}"]`);      const output = (name) => board.querySelector(`[data-output="${name}"]`);      const listEl = output("sku-list");      const latestEl = output("latest-sku");      const hintEl = output("latest-hint");      const skus = [];      const sanitize = (value) => (value || "").toUpperCase().replace(/[^A-Z0-9]/g, "");      const pad = (num, size) => String(Math.max(0, Math.floor(num))).padStart(size, "0");      const randomSuffix = () => {        const chars = "ABCDEFGHJKMNPQRSTUVWXYZ23456789";        return Array.from({ length: 2 }, () => chars[Math.floor(Math.random() * chars.length)]).join("");      };      const buildSku = () => {        const prefix = sanitize(inputs("prefix")?.value);        const category = sanitize(inputs("category")?.value);        const product = sanitize(inputs("product")?.value);        const variant = sanitize(inputs("variant")?.value);        const separator = (inputs("separator")?.value || "-").substring(0, 1) || "-";        const digits = Math.min(8, Math.max(2, parseInt(inputs("digits")?.value, 10) || 4));        const seqInput = inputs("sequence");        const sequenceValue = Math.max(0, parseInt(seqInput?.value, 10) || 0);        const useDate = Boolean(inputs("useDate")?.checked);        const autoIncrement = Boolean(inputs("autoIncrement")?.checked);        const useRandomSuffix = Boolean(inputs("randomSuffix")?.checked);        const manualSuffix = sanitize(inputs("suffix")?.value);        const segments = [prefix, category, product, variant].filter(Boolean);        if (useDate) {          const now = new Date();          const yy = String(now.getFullYear()).slice(-2);          const mm = String(now.getMonth() + 1).padStart(2, "0");          segments.push(`${yy}${mm}`);        }        segments.push(pad(sequenceValue, digits));        const suffix = manualSuffix || (useRandomSuffix ? randomSuffix() : "");        if (suffix) segments.push(suffix);        const sku = segments.join(separator);          if (autoIncrement && seqInput) {            seqInput.value = sequenceValue + 1;          }          return sku;        };        const updateLatest = () => {          const last = skus[skus.length - 1];          if (latestEl) latestEl.textContent = last ? last.value : "—";          if (hintEl) {            hintEl.textContent = last              ? "SKU pronto. Clique para copiar ou gere o proximo."              : "Clique em \"Gerar SKU\" para comecar.";          }        };      const renderList = () => {        if (!listEl) return;        if (!skus.length) {          listEl.innerHTML = '<p class="note" style="margin:0;">Nenhum SKU gerado ainda.</p>';          return;        }          const startIndex = Math.max(0, skus.length - 12);          const recent = skus            .slice(startIndex)            .map((entry, idx) => ({ entry, index: startIndex + idx }))            .reverse();          listEl.innerHTML = recent            .map(({ entry }) => `              <div class="sku-line">                <span>${entry.value}</span>                <div class="actions">                  <button class="ghost-btn btn-small" data-copy="${entry.value}">Copiar</button>                  <button class="ghost-btn btn-small" data-delete-sku="${entry.id}">Excluir</button>                </div>              </div>            `)          .join("");        listEl.querySelectorAll("[data-copy]").forEach((btn) => {          btn.addEventListener("click", () => copyText(btn.getAttribute("data-copy") || ""));        });          listEl.querySelectorAll("[data-delete-sku]").forEach((btn) => {            btn.addEventListener("click", () => {              const id = btn.getAttribute("data-delete-sku");              if (!id) return;              removeSku(id);            });          });        };      const copyText = async (text) => {        if (!text) return;        try {          await navigator.clipboard.writeText(text);          if (hintEl) hintEl.textContent = "Copiado para a área de transferência.";        } catch (_) {          const area = document.createElement("textarea");          area.value = text;          document.body.appendChild(area);          area.select();          document.execCommand("copy");          document.body.removeChild(area);          if (hintEl) hintEl.textContent = "Copiado (fallback).";        }      };      const saveSku = async (value) => {        try {          const response = await fetch(withBase("/api/skus"), {            method: "POST",            headers: { "Content-Type": "application/json" },            body: JSON.stringify({ value })          });          if (!response.ok) throw new Error("Falha ao salvar SKU");          const data = await response.json();          if (data && data.sku) {            skus.push({ id: data.sku.id, value: data.sku.value });          }        } catch {          skus.push({ id: `local-${Date.now()}`, value });        }        if (skus.length > 200) skus.shift();        updateLatest();        renderList();      };      const removeSku = async (id) => {        const index = skus.findIndex((entry) => String(entry.id) === String(id));        if (index === -1) return;        if (Number.isFinite(Number(id))) {          try {            await fetch(withBase(`/api/skus/${id}`), { method: "DELETE" });          } catch {            /* ignore */          }        }        skus.splice(index, 1);        updateLatest();        renderList();      };      const loadSkus = async () => {        try {          const response = await fetch(withBase("/api/skus?limit=200"));          if (!response.ok) throw new Error("Falha ao carregar SKUs");          const data = await response.json();          const items = Array.isArray(data.skus) ? data.skus : [];          skus.splice(            0,            skus.length,            ...items.map((item) => ({              id: item.id,              value: item.value            }))          );        } catch {          skus.splice(0, skus.length);        }        updateLatest();        renderList();      };      const generate = async () => {        const sku = buildSku();        await saveSku(sku);      };      board.querySelectorAll("[data-sku-action]").forEach((btn) => {        const action = btn.getAttribute("data-sku-action");        if (action === "generate") {          btn.addEventListener("click", generate);        } else if (action === "copy-last") {          btn.addEventListener("click", () => copyText(latestEl?.textContent || ""));        } else if (action === "copy-all") {          btn.addEventListener("click", () =>            copyText(skus.map((entry) => entry.value).join("\n"))          );        }      });      loadSkus();    }    function renderApp3() {      const board = document.getElementById("board-content");      board.innerHTML = `        <div class="board-card">          <div class="app-header">            <div>              <h2 style="margin: 0 0 6px 0;">Gerador de EAN-13</h2>              <p class="note">Monte códigos EAN-13 válidos com dígito verificador automático. Defina prefixo, empresa e produto ou deixe a ferramenta sortear.</p>            </div>            <div class="pill">EAN com dígito verificador</div>          </div>          <div class="calc-grid">            <div class="panel-card">              <div class="panel-title">                <div>                  <h3 style="margin: 0;">Configuração</h3>                  <p class="note" style="margin: 4px 0 0 0;">Preencha blocos numéricos; campos vazios são completados automaticamente.</p>                </div>                <span class="chip">EAN-13</span>              </div>              <div class="field-grid">                <label class="field">                  <span>Prefixo GS1 (3 dígitos)</span>                  <input type="text" value="789" maxlength="3" data-ean-input="prefix" />                </label>                <label class="field">                  <span>Código da empresa (4 dígitos)</span>                  <input type="text" value="1234" maxlength="4" data-ean-input="company" />                </label>                <label class="field">                  <span>Código do produto (5 dígitos)</span>                  <input type="text" value="56789" maxlength="5" data-ean-input="product" />                </label>                <label class="field">                  <span>Quantidade para gerar</span>                  <input type="number" min="1" max="50" step="1" value="5" data-ean-input="count" />                </label>              </div>              <div class="field" style="gap: 10px;">                <div class="checkbox-row">                  <input type="checkbox" data-ean-input="randomFill" checked />                  <span>Preencher automaticamente se faltar dígitos</span>                </div>                <div class="checkbox-row">                  <input type="checkbox" data-ean-input="incrementProduct" checked />                  <span>Incrementar produto a cada EAN gerado</span>                </div>              </div>              <p class="hint">O EAN-13 precisa de 12 dígitos base + 1 dígito verificador. Usamos o algoritmo oficial de módulo 10.</p>            </div>            <div class="panel-card">              <div class="panel-title">                <div>                  <h3 style="margin: 0;">Saída</h3>                  <p class="note" style="margin: 4px 0 0 0;">Gere e copie EANs válidos.</p>                </div>                <div class="actions">                  <button class="primary-btn" data-ean-action="generate">Gerar EAN</button>                  <button class="ghost-btn" data-ean-action="copy-last">Copiar último</button>                  <button class="ghost-btn" data-ean-action="copy-all">Copiar todos</button>                </div>              </div>              <div class="sku-output">                <span class="eyebrow" style="margin:0;">Último EAN</span>                <div class="sku-text" data-output="latest-ean">—</div>                <p class="note" data-output="latest-ean-hint">Clique em "Gerar EAN" para começar.</p>              </div>              <div class="list" data-output="ean-list"></div>              <p class="meta">Formato: 12 dígitos base + dígito verificador. Ex.: 7891234567892.</p>            </div>          </div>        </div>      `;      initEanGenerator();    }    function initEanGenerator() {      const board = document.getElementById("board-content");      if (!board) return;      const getInput = (name) => board.querySelector(`[data-ean-input="${name}"]`);      const latestEl = board.querySelector('[data-output="latest-ean"]');      const hintEl = board.querySelector('[data-output="latest-ean-hint"]');      const listEl = board.querySelector('[data-output="ean-list"]');      const eans = [];      const digitsOnly = (value) => (value || "").replace(/\D/g, "");      const randDigits = (len) => Array.from({ length: len }, () => Math.floor(Math.random() * 10)).join("");      const padOrFill = (value, len, allowRandom) => {        const clean = digitsOnly(value).slice(0, len);        if (clean.length === len) return clean;        if (allowRandom) return (clean + randDigits(len)).slice(0, len);        return clean.padEnd(len, "0").slice(0, len);      };      const calcCheckDigit = (base12) => {        const digits = base12.split("").map((d) => parseInt(d, 10));        const sum = digits.reduce((acc, digit, idx) => {          const isEvenPosition = (idx + 1) % 2 === 0;          return acc + digit * (isEvenPosition ? 3 : 1);        }, 0);        return (10 - (sum % 10)) % 10;      };        const buildEans = () => {          const allowRandom = Boolean(getInput("randomFill")?.checked);          const incrementProduct = Boolean(getInput("incrementProduct")?.checked);          const count = Math.min(50, Math.max(1, parseInt(getInput("count")?.value, 10) || 1));        const prefix = padOrFill(getInput("prefix")?.value || "", 3, allowRandom);        const company = padOrFill(getInput("company")?.value || "", 4, allowRandom);        const productBaseRaw = padOrFill(getInput("product")?.value || "", 5, allowRandom);        const productBase = parseInt(productBaseRaw, 10) || 0;        const generated = [];        for (let i = 0; i < count; i += 1) {          const productNumber = incrementProduct ? productBase + i : productBase;          const product = String(productNumber).padStart(5, "0").slice(0, 5);          const base12 = `${prefix}${company}${product}`.slice(0, 12);          const check = calcCheckDigit(base12);          generated.push(`${base12}${check}`);          }          return generated;        };        const updateLatest = () => {          const last = eans[eans.length - 1];          if (latestEl) latestEl.textContent = last ? last.value : "—";          if (hintEl) {            hintEl.textContent = last              ? "EAN pronto. Clique para copiar ou gere o proximo."              : "Clique em \"Gerar EAN\" para comecar.";          }        };      const copyText = async (text) => {        if (!text) return;        try {          await navigator.clipboard.writeText(text);          if (hintEl) hintEl.textContent = "Copiado para a área de transferência.";        } catch (_) {          const area = document.createElement("textarea");          area.value = text;          document.body.appendChild(area);          area.select();          document.execCommand("copy");          document.body.removeChild(area);          if (hintEl) hintEl.textContent = "Copiado (fallback).";        }      };      const renderList = () => {        if (!listEl) return;        if (!eans.length) {          listEl.innerHTML = '<p class="note" style="margin:0;">Nenhum EAN gerado ainda.</p>';          return;        }        const startIndex = Math.max(0, eans.length - 20);        const recent = eans          .slice(startIndex)          .map((entry, idx) => ({ entry, index: startIndex + idx }))          .reverse();        listEl.innerHTML = recent          .map(({ entry }) => `            <div class="sku-line">              <span>${entry.value}</span>              <div class="actions">                <button class="ghost-btn btn-small" data-copy="${entry.value}">Copiar</button>                <button class="ghost-btn btn-small" data-delete-ean="${entry.id}">Excluir</button>              </div>            </div>          `)          .join("");        listEl.querySelectorAll("[data-copy]").forEach((btn) => {          btn.addEventListener("click", () => copyText(btn.getAttribute("data-copy") || ""));        });        listEl.querySelectorAll("[data-delete-ean]").forEach((btn) => {          btn.addEventListener("click", () => {            const id = btn.getAttribute("data-delete-ean");            if (!id) return;            removeEan(id);          });        });      };      const saveEans = async (values) => {        const saved = [];        for (const value of values) {          try {            const response = await fetch(withBase("/api/eans"), {              method: "POST",              headers: { "Content-Type": "application/json" },              body: JSON.stringify({ value })            });            if (!response.ok) throw new Error("Falha ao salvar EAN");            const data = await response.json();            if (data && data.ean) {              saved.push({ id: data.ean.id, value: data.ean.value });            }          } catch {            saved.push({ id: `local-${Date.now()}-${saved.length}`, value });          }        }        if (saved.length) {          eans.push(...saved);          if (eans.length > 500) eans.splice(0, eans.length - 500);          updateLatest();          renderList();        }      };      const removeEan = async (id) => {        const index = eans.findIndex((entry) => String(entry.id) === String(id));        if (index === -1) return;        if (Number.isFinite(Number(id))) {          try {            await fetch(withBase(`/api/eans/${id}`), { method: "DELETE" });          } catch {            /* ignore */          }        }        eans.splice(index, 1);        updateLatest();        renderList();      };      const loadEans = async () => {        try {          const response = await fetch(withBase("/api/eans?limit=500"));          if (!response.ok) throw new Error("Falha ao carregar EANs");          const data = await response.json();          const items = Array.isArray(data.eans) ? data.eans : [];          eans.splice(            0,            eans.length,            ...items.map((item) => ({              id: item.id,              value: item.value            }))          );        } catch {          eans.splice(0, eans.length);        }        updateLatest();        renderList();      };      const generate = async () => {        const generated = buildEans();        if (!generated.length) return;        if (hintEl) hintEl.textContent = `Gerados ${generated.length} EAN(s).`;        await saveEans(generated);      };      board.querySelectorAll("[data-ean-action]").forEach((btn) => {        const action = btn.getAttribute("data-ean-action");        if (action === "generate") {          btn.addEventListener("click", generate);        } else if (action === "copy-last") {          btn.addEventListener("click", () => copyText(latestEl?.textContent || ""));        } else if (action === "copy-all") {          btn.addEventListener("click", () =>            copyText(eans.map((entry) => entry.value).join("\n"))          );        }      });      loadEans();    }    function renderDuoCatalog() {      const board = document.getElementById("board-content");      if (!board) return;      const catalogUrl = withBase("/");      board.innerHTML = `        <div class="board-card">          <div class="app-header">            <div>              <h2 style="margin: 0 0 6px 0;">Catálogo Duo</h2>              <p class="note">Abra o catálogo de produtos em nova guia. Usa o build em <code>MVP/dist</code>.</p>            </div>            <div class="pill">Abre em nova aba</div>          </div>          <a class="cta" href="${catalogUrl}" target="_blank" rel="noopener" data-duo-catalog-cta>Abrir catálogo da Duo</a>          <p class="note">Para atualizar o catálogo, rode <code>npm run build</code> dentro de <code>MVP</code>; o link segue apontando para o build mais recente.</p>        </div>      `;      const cta = board.querySelector("[data-duo-catalog-cta]");      if (cta) {        cta.addEventListener("click", (ev) => {          ev.preventDefault();          window.open(catalogUrl, "_blank", "noopener");        });      }    }    function renderDuoRegistrations() {      const board = document.getElementById("board-content");      if (!board) return;      const loadRegistrations = async () => {        const list = board.querySelector("[data-registrations-list]");        if (!list) return;        list.innerHTML = '<p class="note" style="margin:0;">Carregando cadastros...</p>';        try {          const response = await fetch(withBase("/api/admin/registrations"));          if (response.status === 401 || response.status === 403) {            list.innerHTML = '<p class="note" style="margin:0;">Entre no catalogo como administrador para ver os cadastros pendentes.</p>';            return;          }          if (!response.ok) throw new Error("Falha ao carregar cadastros");          const data = await response.json();          const items = Array.isArray(data.registrations) ? data.registrations : [];          if (!items.length) {            list.innerHTML = '<p class="note" style="margin:0;">Nenhum cadastro pendente.</p>';            return;          }          list.innerHTML = items            .map(              (item) => `              <div class="sku-line" style="align-items: flex-start;">                <div>                  <strong style="display:block;">${item.name || "Usuario"}</strong>                  <span class="meta" style="display:block;">${item.email || ""}</span>                  <span class="meta" style="display:block;">CNPJ: ${item.cnpj || "-"}</span>                </div>                <div class="actions">                  <button class="primary-btn btn-small" data-approve="${item.id}">Aceitar</button>                  <button class="ghost-btn btn-small" data-reject="${item.id}">Negar</button>                </div>              </div>            `            )            .join("");          list.querySelectorAll("[data-approve]").forEach((btn) => {            btn.addEventListener("click", async () => {              const id = btn.getAttribute("data-approve");              if (!id) return;              await fetch(withBase(`/api/admin/registrations/${id}/approve`), { method: "POST" });              loadRegistrations();            });          });          list.querySelectorAll("[data-reject]").forEach((btn) => {            btn.addEventListener("click", async () => {              const id = btn.getAttribute("data-reject");              if (!id) return;              await fetch(withBase(`/api/admin/registrations/${id}/reject`), { method: "POST" });              loadRegistrations();            });          });        } catch {          list.innerHTML = '<p class="note" style="margin:0;">Nao foi possivel carregar os cadastros.</p>';        }      };      board.innerHTML = `        <div class="board-card">          <div class="app-header">            <div>              <h2 style="margin: 0 0 6px 0;">Cadastros pendentes</h2>              <p class="note">Aprove ou negue solicitacoes de cadastro. Disponivel apenas para administradores.</p>            </div>            <div class="actions">              <button class="ghost-btn btn-small" data-registrations-refresh>Atualizar</button>            </div>          </div>          <div class="list" data-registrations-list></div>        </div>      `;      const refreshBtn = board.querySelector("[data-registrations-refresh]");      if (refreshBtn) refreshBtn.addEventListener("click", loadRegistrations);      loadRegistrations();    }    function renderBlingClients() {      const board = document.getElementById("board-content");      if (!board) return;      const loadClients = async () => {        const list = board.querySelector("[data-bling-list]");        if (!list) return;        list.innerHTML = '<p class="note" style="margin:0;">Carregando clientes...</p>';        try {          const response = await fetch(withBase("/api/bling/clients?pagina=1&limite=500"));          if (response.status === 401 || response.status === 403) {            list.innerHTML = '<p class="note" style="margin:0;">Conecte o Bling primeiro para listar os clientes.</p>';            return;          }          if (!response.ok) throw new Error("Falha ao carregar clientes");          const data = await response.json();          const items = Array.isArray(data.data?.data) ? data.data.data : [];          if (!items.length) {            list.innerHTML = '<p class="note" style="margin:0;">Nenhum cliente encontrado.</p>';            return;          }          const formatDate = (value) => {            if (!value) return "-";            const parsed = new Date(value);            if (Number.isNaN(parsed.getTime())) return String(value);            return parsed.toLocaleDateString("pt-BR");          };          list.innerHTML = items            .map((item) => {              const lastPurchase =                item.dataUltimaCompra ||                item.dataUltimoPedido ||                item.dataUltimaVenda ||                item.ultimaCompra ||                null;              return `              <div class="sku-line" style="align-items: center;">                <div>                  <strong style="display:block;">${item.nome || "Cliente"}</strong>                  <span class="meta" style="display:block;">${item.email || "-"}</span>                  <span class="meta" style="display:block;">Documento: ${item.numeroDocumento || "-"}</span>                  <span class="meta" style="display:block;">Ultima compra: ${formatDate(lastPurchase)}</span>                </div>                <div class="actions">                  <button class="ghost-btn btn-small" disabled>Editar(D)</button>                </div>              </div>            `;            })            .join("");        } catch {          list.innerHTML = '<p class="note" style="margin:0;">Nao foi possivel carregar clientes.</p>';        }      };      board.innerHTML = `        <div class="board-card">          <div class="app-header">            <div>              <h2 style="margin: 0 0 6px 0;">Clientes do Bling</h2>              <p class="note">Leitura apenas. Conecte o Bling para carregar os clientes.</p>            </div>            <div class="actions">              <button class="ghost-btn btn-small" data-bling-refresh>Atualizar</button>            </div>          </div>          <div class="list full" data-bling-list></div>        </div>      `;      const refreshBtn = board.querySelector("[data-bling-refresh]");      if (refreshBtn) refreshBtn.addEventListener("click", loadClients);      loadClients();    }
function renderOrderApprovals() {
  const board = document.getElementById("board-content");
  if (!board) return;

  const loadOrders = async () => {
    const list = board.querySelector("[data-orders-list]");
    if (!list) return;
    list.innerHTML = '<p class="note" style="margin:0;">Carregando orcamentos...</p>';
    try {
      const response = await fetch(withBase("/api/orders?status=PENDING"));
      if (response.status === 401 || response.status === 403) {
        list.innerHTML = '<p class="note" style="margin:0;">Somente administradores podem aprovar orcamentos.</p>';
        return;
      }
      if (!response.ok) throw new Error("Falha ao carregar orcamentos");
      const data = await response.json();
      const items = Array.isArray(data.orders) ? data.orders : [];
      if (!items.length) {
        list.innerHTML = '<p class="note" style="margin:0;">Nenhum orcamento pendente.</p>';
        return;
      }
      list.innerHTML = items
        .map((item) => {
          const payload = item.payload || {};
          const client = payload.cliente || {};
          const itens = Array.isArray(payload.itens) ? payload.itens : [];
          return `
            <div class="sku-line" style="align-items: flex-start;">
              <div>
                <strong style="display:block;">Pedido ${item.orderNumber || "-"}</strong>
                <span class="meta" style="display:block;">Cliente: ${client.nome || client.email || "-"}</span>
                <span class="meta" style="display:block;">Total: R$ ${Number(payload.total || 0).toFixed(2)}</span>
                <span class="meta" style="display:block;">Itens: ${itens.length}</span>
              </div>
              <div class="actions">
                <button class="primary-btn btn-small" data-approve-order="${item.id}">Aprovar e enviar</button>
              </div>
            </div>
          `;
        })
        .join("");

      list.querySelectorAll("[data-approve-order]").forEach((btn) => {
        btn.addEventListener("click", async () => {
          const id = btn.getAttribute("data-approve-order");
          if (!id) return;
          btn.setAttribute("disabled", "disabled");
          await fetch(withBase(`/api/orders/${id}/approve`), { method: "POST" });
          loadOrders();
        });
      });
    } catch {
      list.innerHTML = '<p class="note" style="margin:0;">Nao foi possivel carregar orcamentos.</p>';
    }
  };

  board.innerHTML = `
    <div class="board-card">
      <div class="app-header">
        <div>
          <h2 style="margin: 0 0 6px 0;">Aprovacao de orcamentos</h2>
          <p class="note">Pedidos enviados pelos usuarios ficam pendentes aqui ate aprovacao.</p>
        </div>
        <div class="actions">
          <button class="ghost-btn btn-small" data-orders-refresh>Atualizar</button>
        </div>
      </div>
      <div class="list" data-orders-list></div>
    </div>
  `;

  const refreshBtn = board.querySelector("[data-orders-refresh]");
  if (refreshBtn) refreshBtn.addEventListener("click", loadOrders);
  loadOrders();
}

function renderBlingProducts() {
  const board = document.getElementById("board-content");
  if (!board) return;

  const loadProducts = async () => {
    const list = board.querySelector("[data-bling-products]");
    if (!list) return;
    list.innerHTML = '<p class="note" style="margin:0;">Carregando produtos...</p>';
    try {
      const response = await fetch(withBase("/api/bling/products?pagina=1&limite=200"));
      if (response.status === 401 || response.status === 403) {
        list.innerHTML = '<p class="note" style="margin:0;">Conecte o Bling primeiro para listar os produtos.</p>';
        return;
      }
      if (!response.ok) throw new Error("Falha ao carregar produtos");
      const data = await response.json();
      const items = Array.isArray(data.data?.data) ? data.data.data : [];
      if (!items.length) {
        list.innerHTML = '<p class="note" style="margin:0;">Nenhum produto encontrado.</p>';
        return;
      }
      list.innerHTML = items
        .map((item) => {
          const price = Number(item.preco ?? item.valor ?? 0).toFixed(2);
          return `
            <div class="sku-line" style="align-items: flex-start;">
              <div>
                <strong style="display:block;">${item.nome || item.descricao || "Produto"}</strong>
                <span class="meta" style="display:block;">Codigo: ${item.codigo || item.id || "-"}</span>
                <span class="meta" style="display:block;">Preco: R$ ${price}</span>
              </div>
            </div>
          `;
        })
        .join("");
    } catch {
      list.innerHTML = '<p class="note" style="margin:0;">Nao foi possivel carregar produtos.</p>';
    }
  };

  board.innerHTML = `
    <div class="board-card">
      <div class="app-header">
        <div>
          <h2 style="margin: 0 0 6px 0;">Produtos do Bling</h2>
          <p class="note">Leitura apenas. Lista os produtos cadastrados no Bling.</p>
        </div>
        <div class="actions">
          <button class="ghost-btn btn-small" data-bling-products-refresh>Atualizar</button>
        </div>
      </div>
      <div class="list full" data-bling-products></div>
    </div>
  `;

  const refreshBtn = board.querySelector("[data-bling-products-refresh]");
  if (refreshBtn) refreshBtn.addEventListener("click", loadProducts);
  loadProducts();
}

function renderBlingSellers() {
  const board = document.getElementById("board-content");
  if (!board) return;

  const loadSellers = async () => {
    const list = board.querySelector("[data-bling-sellers]");
    if (!list) return;
    list.innerHTML = '<p class="note" style="margin:0;">Carregando vendedores...</p>';
    try {
      const response = await fetch(withBase("/api/bling/sellers?pagina=1&limite=200"));
      if (response.status === 401 || response.status === 403) {
        list.innerHTML = '<p class="note" style="margin:0;">Conecte o Bling primeiro para listar os vendedores.</p>';
        return;
      }
      if (!response.ok) throw new Error("Falha ao carregar vendedores");
      const data = await response.json();
      const items = Array.isArray(data.data?.data) ? data.data.data : [];
      if (!items.length) {
        list.innerHTML = '<p class="note" style="margin:0;">Nenhum vendedor encontrado.</p>';
        return;
      }
      list.innerHTML = items
        .map((item) => `
          <div class="sku-line" style="align-items: flex-start;">
            <div>
              <strong style="display:block;">${item.nome || "Vendedor"}</strong>
              <span class="meta" style="display:block;">Email: ${item.email || "-"}</span>
              <span class="meta" style="display:block;">Situacao: ${item.situacao || item.ativo || "-"}</span>
            </div>
          </div>
        `)
        .join("");
    } catch {
      list.innerHTML = '<p class="note" style="margin:0;">Nao foi possivel carregar vendedores.</p>';
    }
  };

  board.innerHTML = `
    <div class="board-card">
      <div class="app-header">
        <div>
          <h2 style="margin: 0 0 6px 0;">Vendedores do Bling</h2>
          <p class="note">Leitura apenas. Lista os vendedores cadastrados.</p>
        </div>
        <div class="actions">
          <button class="ghost-btn btn-small" data-bling-sellers-refresh>Atualizar</button>
        </div>
      </div>
      <div class="list full" data-bling-sellers></div>
    </div>
  `;

  const refreshBtn = board.querySelector("[data-bling-sellers-refresh]");
  if (refreshBtn) refreshBtn.addEventListener("click", loadSellers);
  loadSellers();
}

function renderBlingStock() {
  const board = document.getElementById("board-content");
  if (!board) return;

  const loadStock = async () => {
    const list = board.querySelector("[data-bling-stock]");
    if (!list) return;
    list.innerHTML = '<p class="note" style="margin:0;">Carregando estoque...</p>';
    try {
      const response = await fetch(withBase("/api/bling/stock?pagina=1&limite=200"));
      if (response.status === 401 || response.status === 403) {
        list.innerHTML = '<p class="note" style="margin:0;">Conecte o Bling primeiro para listar o estoque.</p>';
        return;
      }
      if (!response.ok) throw new Error("Falha ao carregar estoque");
      const data = await response.json();
      const items = Array.isArray(data.data?.data) ? data.data.data : [];
      if (!items.length) {
        list.innerHTML = '<p class="note" style="margin:0;">Nenhum saldo de estoque encontrado.</p>';
        return;
      }
      list.innerHTML = items
        .map((item) => `
          <div class="sku-line" style="align-items: flex-start;">
            <div>
              <strong style="display:block;">${item.produto?.nome || item.nome || "Produto"}</strong>
              <span class="meta" style="display:block;">Codigo: ${item.produto?.codigo || item.codigo || "-"}</span>
              <span class="meta" style="display:block;">Saldo: ${item.saldo ?? item.saldoDisponivel ?? item.saldoFisico ?? "-"}</span>
            </div>
          </div>
        `)
        .join("");
    } catch {
      list.innerHTML = '<p class="note" style="margin:0;">Nao foi possivel carregar estoque.</p>';
    }
  };

  board.innerHTML = `
    <div class="board-card">
      <div class="app-header">
        <div>
          <h2 style="margin: 0 0 6px 0;">Estoque do Bling</h2>
          <p class="note">Leitura apenas. Saldo por produto.</p>
        </div>
        <div class="actions">
          <button class="ghost-btn btn-small" data-bling-stock-refresh>Atualizar</button>
        </div>
      </div>
      <div class="list full" data-bling-stock></div>
    </div>
  `;

  const refreshBtn = board.querySelector("[data-bling-stock-refresh]");
  if (refreshBtn) refreshBtn.addEventListener("click", loadStock);
  loadStock();
}

function renderBlingOrders() {
  const board = document.getElementById("board-content");
  if (!board) return;

  const loadOrders = async () => {
    const list = board.querySelector("[data-bling-orders]");
    if (!list) return;
    list.innerHTML = '<p class="note" style="margin:0;">Carregando pedidos...</p>';
    try {
      const response = await fetch(withBase("/api/bling/orders?pagina=1&limite=200"));
      if (response.status === 401 || response.status === 403) {
        list.innerHTML = '<p class="note" style="margin:0;">Conecte o Bling primeiro para listar os pedidos.</p>';
        return;
      }
      if (!response.ok) throw new Error("Falha ao carregar pedidos");
      const data = await response.json();
      const items = Array.isArray(data.data?.data) ? data.data.data : [];
      if (!items.length) {
        list.innerHTML = '<p class="note" style="margin:0;">Nenhum pedido encontrado.</p>';
        return;
      }
      list.innerHTML = items
        .map((item) => `
          <div class="sku-line" style="align-items: flex-start;">
            <div>
              <strong style="display:block;">Pedido ${item.numero || item.numeroLoja || item.id || "-"}</strong>
              <span class="meta" style="display:block;">Cliente: ${item.contato?.nome || "-"}</span>
              <span class="meta" style="display:block;">Total: R$ ${Number(item.total || 0).toFixed(2)}</span>
            </div>
          </div>
        `)
        .join("");
    } catch {
      list.innerHTML = '<p class="note" style="margin:0;">Nao foi possivel carregar pedidos.</p>';
    }
  };

  board.innerHTML = `
    <div class="board-card">
      <div class="app-header">
        <div>
          <h2 style="margin: 0 0 6px 0;">Pedidos de venda (Bling)</h2>
          <p class="note">Leitura apenas. Ultimos pedidos enviados.</p>
        </div>
        <div class="actions">
          <button class="ghost-btn btn-small" data-bling-orders-refresh>Atualizar</button>
        </div>
      </div>
      <div class="list full" data-bling-orders></div>
    </div>
  `;

  const refreshBtn = board.querySelector("[data-bling-orders-refresh]");
  if (refreshBtn) refreshBtn.addEventListener("click", loadOrders);
  loadOrders();
}
function renderDuoAdmin() {      const board = document.getElementById("board-content");      if (!board) return;      const products = [];      const toProductView = (item) => {        let price = Number(item.price ?? item.preco ?? 0);        if (!Number.isFinite(price) || price <= 0) {          const cents = Number(item.priceCents ?? item.precoCents ?? 0);          price = Number.isFinite(cents) ? cents / 100 : 0;        }        return {          id: item.id,          nome: item.name ?? item.nome ?? "",          descricao: item.description ?? item.descricao ?? "",          preco: price,          categoria: item.category ?? item.categoria ?? "",          imagem: item.mainImageUrl ?? item.imagem ?? "",          imagens: Array.isArray(item.imageUrls ?? item.imagens)            ? item.imageUrls ?? item.imagens            : []        };      };      const loadProducts = async () => {        try {          const response = await fetch(withBase("/api/products?limit=500"));          if (!response.ok) throw new Error("Falha ao carregar produtos");          const data = await response.json();          const items = Array.isArray(data.products) ? data.products : [];          products.splice(0, products.length, ...items.map(toProductView));        } catch {          products.splice(0, products.length);        }        renderList();      };      const renderList = () => {        const list = board.querySelector("[data-admin-list]");        if (!list) return;        if (!products.length) {          list.innerHTML = '<p class="note" style="margin:0;">Nenhum produto cadastrado ainda.</p>';          return;        }        list.innerHTML = products          .map(            (p) => `            <div class="sku-line">              <span>${p.nome} — R$ ${Number(p.preco || 0).toFixed(2)}</span>              <div class="actions">                <button class="ghost-btn btn-small" data-admin-remove="${p.id}">Remover</button>              </div>            </div>          `          )          .join("");        list.querySelectorAll("[data-admin-remove]").forEach((btn) => {          btn.addEventListener("click", () => {            const id = btn.getAttribute("data-admin-remove");            if (!id) return;            removeProduct(id);          });        });      };      const createProduct = async (payload) => {        const response = await fetch(withBase("/api/products"), {          method: "POST",          headers: { "Content-Type": "application/json" },          body: JSON.stringify(payload)        });        if (!response.ok) throw new Error("Falha ao salvar produto");        const data = await response.json();        if (data && data.product) {          products.push(toProductView(data.product));          renderList();        }      };      const removeProduct = async (id) => {        const index = products.findIndex((item) => String(item.id) === String(id));        if (index === -1) return;        try {          await fetch(withBase(`/api/products/${id}`), { method: "DELETE" });        } catch {          /* ignore */        }        products.splice(index, 1);        renderList();      };      const submitForm = async (event) => {        event.preventDefault();        const form = event.currentTarget;        const data = new FormData(form);        const nome = data.get("nome")?.toString().trim();        const preco = parseFloat(data.get("preco")?.toString().replace(",", ".") || "0");        if (!nome || Number.isNaN(preco) || preco <= 0) {          alert("Preencha nome e preco valido.");          return;        }        const payload = {          name: nome,          description: data.get("descricao")?.toString() || "",          price: preco,          category: data.get("categoria")?.toString() || "Pesca",          mainImageUrl: data.get("imagem")?.toString() || "",          imageUrls: (data.get("imagens")?.toString() || "")            .split(",")            .map((s) => s.trim())            .filter(Boolean)        };        try {          await createProduct(payload);          form.reset();        } catch {          alert("Erro ao salvar produto.");        }      };      board.innerHTML = `        <div class="board-card">          <div class="app-header">            <div>              <h2 style="margin: 0 0 6px 0;">Gestão de Produtos (Duo)</h2>              <p class="note">Adicione ou remova itens do catalogo. Salvos no banco local.</p>            </div>            <div class="pill">Somente Duo / Admin</div>          </div>          <div class="calc-grid">            <div class="panel-card">              <div class="panel-title">                <div>                  <h3 style="margin: 0;">Adicionar produto</h3>                  <p class="note" style="margin: 4px 0 0 0;">Preencha os campos e salve. Caminhos locais: use /pre_order_imagens/arquivo.png.</p>                </div>              </div>              <form class="field-grid" data-admin-form>                <label class="field">                  <span>Nome</span>                  <input name="nome" type="text" required />                </label>                <label class="field">                  <span>Preço (R$)</span>                  <input name="preco" type="number" step="0.01" min="0" required />                </label>                <label class="field">                  <span>Categoria</span>                  <input name="categoria" type="text" value="Pesca" />                </label>                <label class="field">                  <span>Imagem (URL)</span>                  <input name="imagem" type="text" placeholder="/pre_order_imagens/prd-xxx.png" />                </label>                <label class="field">                  <span>Imagens adicionais (CSV)</span>                  <input name="imagens" type="text" placeholder="img1.png, img2.png" />                </label>                <label class="field" style="grid-column: 1 / -1;">                  <span>Descrição</span>                  <input name="descricao" type="text" />                </label>                <div style="grid-column: 1 / -1;">                  <button class="primary-btn" type="submit">Salvar produto</button>                </div>              </form>            </div>            <div class="panel-card">              <div class="panel-title">                <div>                  <h3 style="margin: 0;">Produtos salvos</h3>                  <p class="note" style="margin: 4px 0 0 0;">Itens adicionados ficam salvos no banco local.</p>                </div>              </div>              <div class="list" data-admin-list></div>            </div>          </div>        </div>      `;      const form = board.querySelector("[data-admin-form]");      if (form) {        form.addEventListener("submit", submitForm);      }      loadProducts();    }    function renderPlaceholder(name) {      const board = document.getElementById("board-content");      board.innerHTML = `        <div class="board-card">          <h2 style="margin: 0 0 8px 0;">${name}</h2>          <p class="note">Integrar conteudo deste app aqui.</p>        </div>      `;    }    function renderBrandPlaceholder(title, note = "Integrar conteudo deste app aqui.") {      const board = document.getElementById("board-content");      board.innerHTML = `        <div class="board-card">          <h2 style="margin: 0 0 8px 0;">${title}</h2>          <p class="note">${note}</p>        </div>      `;    }    async function fetchStatus() {      const statusEl = document.getElementById("server-status");      if (!statusEl) return;      try {        const response = await fetch(withBase("/api/status"));        if (!response.ok) {          throw new Error("Resposta invalida do servidor");        }        const data = await response.json();        statusEl.classList.remove("offline");        statusEl.classList.add("online");        statusEl.innerHTML = '<span class="dot"></span>' + (data.message || "Servidor online");      } catch (error) {        statusEl.classList.remove("online");        statusEl.classList.add("offline");        statusEl.innerHTML = '<span class="dot offline"></span>Servidor indisponivel';      }    }    const switchBrandBtn = document.getElementById("switch-brand");    if (switchBrandBtn) {      switchBrandBtn.addEventListener("click", () => renderBrandGate());    }    const settingsBtn = document.getElementById("open-settings");    const settingsPopover = document.getElementById("settings-popover");    const blingConnect = document.getElementById("bling-connect");    if (blingConnect) {      blingConnect.setAttribute("href", withBase("/api/bling/connect"));    }    if (settingsBtn && settingsPopover) {      settingsBtn.addEventListener("click", (event) => {        event.stopPropagation();        settingsPopover.classList.toggle("open");      });      document.addEventListener("click", (event) => {        if (!settingsPopover.classList.contains("open")) return;        const target = event.target;        if (!(target instanceof Node)) return;        if (!settingsPopover.contains(target) && target !== settingsBtn) {          settingsPopover.classList.remove("open");        }      });    }    function bootstrapWorkspace() {      const stored = localStorage.getItem("brandSelection");      if (stored && brandConfigs[stored]) {        applyBrand(stored);      } else {        renderBrandGate();      }    }    fetchStatus();    bootstrapWorkspace();  </script>  <script>
    (function () {
      const toggle = document.getElementById("mobile-menu-toggle");
      const sidebar = document.querySelector(".sidebar");
      const overlay = document.getElementById("mobile-overlay");
      const menu = document.getElementById("menu");
      const closeMenu = () => {
        if (sidebar) sidebar.classList.remove("is-open");
        if (overlay) overlay.classList.remove("open");
      };
      if (toggle) {
        toggle.addEventListener("click", () => {
          if (sidebar) sidebar.classList.toggle("is-open");
          if (overlay) overlay.classList.toggle("open");
        });
      }
      if (overlay) {
        overlay.addEventListener("click", closeMenu);
      }
      if (menu) {
        menu.addEventListener("click", (event) => {
          const target = event.target;
          if (!(target instanceof HTMLElement)) return;
          if (target.classList.contains("menu-item")) {
            closeMenu();
          }
        });
      }
      window.addEventListener("resize", () => {
        if (window.innerWidth > 640) {
          closeMenu();
        }
      });
    })();
  </script>  <script>
    (function () {
      var brandLogo = document.getElementById("brand-logo");
      var topLogo = document.getElementById("topbar-logo");
      var sync = function () {
        if (!brandLogo || !topLogo) return;
        topLogo.src = brandLogo.src;
        topLogo.alt = brandLogo.alt || "Logo";
      };
      if (brandLogo && topLogo) {
        sync();
        var observer = new MutationObserver(sync);
        observer.observe(brandLogo, { attributes: true, attributeFilter: ["src", "alt"] });
      }
    })();
  </script>  <script>
    (function () {
      var closeBtn = document.getElementById("mobile-menu-close");
      var sidebar = document.querySelector(".sidebar");
      var overlay = document.getElementById("mobile-overlay");
      var closeMenu = function () {
        if (sidebar) sidebar.classList.remove("is-open");
        if (overlay) overlay.classList.remove("open");
      };
      if (closeBtn) closeBtn.addEventListener("click", closeMenu);
    })();
  </script></body></html>

















